<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumen DOS</title>
    <link rel="stylesheet" href="/resources/styles/branding.css">
    <style>
        .stage {
            background: #000;
            font-family: 'Perfect DOS VGA 437', 'Consolas', 'Courier New', monospace;
            overflow-y: auto;
        }
        #terminal {
            color: #aaa;
            font-size: 16px;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
                            text-align: start;
                width: 100%;
        }
        .prompt {
            color: #fff;
        }
        .input-line {
            display: flex;
        }
        #input {
            background: transparent;
            border: none;
            outline: none;
            color: #fff;
            font-family: inherit;
            font-size: inherit;
            flex: 1;
            caret-color: #fff;
        }
        .cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #fff;
            animation: blink 1s step-end infinite;
        }
        @keyframes blink {
            50% { opacity: 0; }
        }
        .error { color: #f88; }
        .success { color: #8f8; }
        .info { color: #8ff; }
        .warning { color: #ff8; }
        .input-line {
                text-align: start;
                width: 100%;
        }
    </style>
</head>
<body>
    <div id="stage" class="stage" aria-live="polite" aria-label="Lumen DOS Terminal">
        <div id="terminal"></div>
        <div class="input-line">
            <span class="prompt">C:\LUMEN></span>
            <input type="text" id="input" autofocus autocomplete="off" spellcheck="false">
        </div>
        <div class="hint">Lumen loves: CLI</div>
    </div>

    <script>
        const terminal = document.getElementById('terminal');
        const input = document.getElementById('input');
        const history = [];
        let historyIndex = -1;

        const fs = {
            'README.TXT': 'Welcome to Lumen Search Engine\n\nA search for all people, where true information is a right.\nTry "help" for available commands.\n\n- BrickerFixer',
            'SECRETS.TXT': 'You found it! Here are some fun facts:\n- First web browser: WorldWideWeb (1990)\n- First search engine: Archie (1990)\n- First website: info.cern.ch (1991)\n- Yahoo! started as "Jerry\'s Guide" (1994)\n- Google was almost called "BackRub" (1996)',
            'HISTORY.TXT': 'Internet Milestones:\n1969 - ARPANET (4 nodes)\n1971 - First email\n1983 - TCP/IP standard\n1989 - WWW proposal by Tim Berners-Lee\n1993 - Mosaic browser\n1998 - Google founded\n2004 - Web 2.0 era begins',
        };

        const commands = {
            help: () => '<span class="info">Available commands:\n\nDIR      - List files\nTYPE     - Display file contents (TYPE filename)\nCLS      - Clear screen\nVER      - Show version\nTIME     - Display current time\nDATE     - Display current date\nECHO     - Print text (ECHO message)\nMEM      - Show memory info\nTREE     - ASCII art surprise\nPING     - Test connection\nCOLOR    - Change text color (COLOR red/green/blue/cyan/yellow/white)\nEXIT     - Close terminal\n\nHidden: Try exploring the filesystem...</span>',
            
            dir: () => {
                return '<span class="info">Volume in drive C is LUMEN\nDirectory of C:\\LUMEN\n\n' +
                    Object.keys(fs).map(f => `${f.padEnd(20)} ${Math.floor(Math.random()*9999)} bytes`).join('\n') +
                    `\n\n     ${Object.keys(fs).length} File(s)\n     1,337,420 bytes free</span>`;
            },
            
            type: (args) => {
                const file = args[0]?.toUpperCase();
                if (!file) return '<span class="error">File not specified</span>';
                if (fs[file]) return `<span class="success">${fs[file]}</span>`;
                return '<span class="error">File not found</span>';
            },
            
            cls: () => {
                terminal.innerHTML = '';
                return '';
            },
            
            ver: () => '<span class="info">LuDOS Version 1.00\nLumen <3 CLI interfaces</span>',
            
            time: () => `<span class="info">Current time is: ${new Date().toLocaleTimeString()}</span>`,
            
            date: () => `<span class="info">Current date is: ${new Date().toLocaleDateString()}</span>`,
            
            echo: (args) => `<span class="success">${args.join(' ')}</span>`,
            
            mem: () => '<span class="info">Memory Status:\n\n  655360 bytes total conventional memory\n  655360 bytes available to DOS\n  587264 bytes largest executable program size\n\n  1048576 bytes total EMS memory\n  1048576 bytes free EMS memory\n\nSearching for internet memories...</span>',
            
            tree: () => `<span class="success">
    *
   ***
  *****
 *******
*********
    |
    |

The Internet
Still Growing!</span>`,
            
            ping: () => '<span class="success">Pinging internet.archive.org [207.241.224.2]\n\nReply from 207.241.224.2: bytes=32 time=12ms TTL=64\nReply from 207.241.224.2: bytes=32 time=11ms TTL=64\nReply from 207.241.224.2: bytes=32 time=13ms TTL=64\n\nThe internet remembers everything!</span>',
            
            color: (args) => {
                const colors = {
                    red: '#f88', green: '#8f8', blue: '#88f',
                    cyan: '#8ff', yellow: '#ff8', white: '#fff'
                };
                const color = args[0]?.toLowerCase();
                if (colors[color]) {
                    terminal.style.color = colors[color];
                    return `<span class="success">Color changed to ${color}</span>`;
                }
                return '<span class="error">Invalid color. Try: red, green, blue, cyan, yellow, white</span>';
            },
            
            exit: () => {
                terminal.innerHTML += '\n<span class="info">Thank you for using Lumen DOS!\nThe internet never truly exits...</span>\n';
                setTimeout(() => location.reload(), 2000);
                return '';
            },
            
            ls: () => '<span class="warning">Bad command or file name. Did you mean DIR?</span>',
            sudo: () => '<span class="error">sudo: command not found\nThis is DOS, not Unix! Try HELP for commands.</span>',
            hack: () => '<span class="success">ACCESSING MAINFRAME...\n[████████████████] 100%\n\nJust kidding! Try TYPE SECRETS.TXT instead.</span>',
        };

        function print(text) {
            terminal.innerHTML += text + '\n';
            terminal.parentElement.scrollTop = terminal.parentElement.scrollHeight;
        }

        print('<span class="success">LuDOS Version 1.00\n\nLumen <3 CLI interfaces</span>');
        print('Type HELP for available commands.\n');

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const cmd = input.value.trim();
                if (cmd) {
                    print(`<span class="prompt">C:\\LUMEN></span>${cmd}`);
                    history.unshift(cmd);
                    historyIndex = -1;
                    
                    const parts = cmd.split(' ');
                    const command = parts[0].toLowerCase();
                    const args = parts.slice(1);
                    
                    if (commands[command]) {
                        const output = commands[command](args);
                        if (output) print(output);
                    } else {
                        print(`<span class="error">Bad command or file name: ${command}</span>`);
                    }
                }
                input.value = '';
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if (historyIndex < history.length - 1) {
                    historyIndex++;
                    input.value = history[historyIndex];
                }
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                if (historyIndex > 0) {
                    historyIndex--;
                    input.value = history[historyIndex];
                } else if (historyIndex === 0) {
                    historyIndex = -1;
                    input.value = '';
                }
            } else if (e.key === 'Tab') {
                e.preventDefault();
                const partial = input.value.toLowerCase();
                const matches = Object.keys(commands).filter(c => c.startsWith(partial));
                if (matches.length === 1) {
                    input.value = matches[0];
                }
            }
        });

        document.addEventListener('click', () => input.focus());
    </script>
</body>
</html>